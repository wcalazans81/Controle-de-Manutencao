<div class="container mt-5" style="max-width: 500px;">
  <h3 class="mb-4 text-center">Login AFFEMG</h3>

  {{#if success_msg}}
    <div class="alert alert-success text-center">{{success_msg}}</div>
  {{/if}}

  {{#if error_msg}}
    <div class="alert alert-danger text-center">{{error_msg}}</div>
  {{/if}}

  <form action="/login" method="POST">
    <div class="mb-3">
      <label for="email_1" class="form-label">E-mail</label>
      <input type="email" name="email_1" id="email_1" class="form-control" required>
    </div>

    <div class="mb-3 position-relative">
      <label for="senhaInput" class="form-label">Senha</label>
      <input type="password" class="form-control pe-5" id="senhaInput" name="senha_1" required>
      <button type="button"
        id="toggleSenha"
        class="btn position-absolute top-50 end-0 me-2 p-0 border-0 bg-transparent"
        style="z-index: 10; top: 50%; transform: translateY(-10%); right: 0.75rem;">
        <i class="bi bi-eye fs-5" id="iconeSenha"></i>
      </button>
    </div>

    <div class="d-grid">
      <button class="btn btn-primary" type="submit">Entrar</button>
    </div>
  </form>

  <div class="mt-3 text-center">
    <a href="/recuperar">Esqueci minha senha</a> |
    <a href="/register">Cadastrar</a>
  </div>

  <div class="mt-3 text-center">
    <a href="/admin/login" class="btn btn-outline-dark btn-sm">Entrar como Administrador</a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.getElementById('toggleSenha');
    const senhaInput = document.getElementById('senhaInput');
    const icone = document.getElementById('iconeSenha');

    toggleBtn.addEventListener('click', function () {
      if (senhaInput.type === 'password') {
        senhaInput.type = 'text';
        icone.classList.replace('bi-eye', 'bi-eye-slash');
      } else {
        senhaInput.type = 'password';
        icone.classList.replace('bi-eye-slash', 'bi-eye');
      }
    });
  });
</script>
