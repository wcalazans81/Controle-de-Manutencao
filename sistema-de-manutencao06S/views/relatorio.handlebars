{{!< main}}

<!-- Título -->
<div class="cab text-center">
  <h1 id="t1">Relatório Manutenção AFFEMG</h1>
  <h3 id="t2">Relatório de Manutenção</h3>
</div>

<main class="container mt-4">
  <!-- Formulário -->
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8">
      <form action="/relatorio" method="get" id="filtro-relatorio" enctype="multipart/form-data">
        <div class="form-group">
          <label>Opções de Relatório:</label><br>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="empresa" id="geral" value="Geral" checked>
            <label class="form-check-label" for="geral">Geral</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="empresa" id="affemg" value="AFFEMG">
            <label class="form-check-label" for="affemg">AFFEMG</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="empresa" id="fundaffemg" value="FUNDAFFEMG">
            <label class="form-check-label" for="fundaffemg">FUNDAFFEMG</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="empresa" id="fisco" value="FISCO CORRETORA">
            <label class="form-check-label" for="fisco">FISCO CORRETORA</label>
          </div>
        </div>

        <div class="row">
          <div class="col-6 col-md-6">
            <div class="form-group">
              <label for="dataInicio">Data Início:</label>
              <input type="date" class="form-control" id="dataInicio" name="dataInicio">
            </div>
          </div>
          <div class="col-6 col-md-6">
            <div class="form-group">
              <label for="dataFim">Data Fim:</label>
              <input type="date" class="form-control" id="dataFim" name="dataFim">
            </div>
          </div>
        </div>

        <div class="mt-3 d-flex flex-column flex-sm-row justify-content-between">
          <button id="buscar" type="button" class="btn btn-warning mb-2 mb-sm-0">Buscar</button>
          <button id="limpar" type="button" class="btn btn-danger mb-2 mb-sm-0">Limpar</button>
          <button type="button" class="btn btn-success" onclick="salvarPDF_00()">Salvar em PDF</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Mensagens de erro -->
  {{#if erro}}
  <script>alert("{{erro}}");</script>
  {{/if}}

  <!-- Tabela de resultados -->
 {{#if dados}}

<!-- TABELA para telas maiores -->
<div class="d-none d-md-block mt-4">
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>Empresa</th>
          <th>Nome</th>
          <th>Setor</th>
          <th>Data</th>
          <th>Descrição</th>
        </tr>
      </thead>
      <tbody>
        {{#each dados}}
        <tr>
          <td>{{empres}}</td>
          <td>{{nom}}</td>
          <td>{{seto}}</td>
          <td>{{formatDate dat}}</td>
          <td>{{descric}}</td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>

<!-- CARDS para telas pequenas -->
<div class="d-block d-md-none mt-4">
  <div class="row">
    {{#each dados}}
    <div class="col-12 mb-3">
      <div class="card">
        <div class="card-body">
          <p><strong>Empresa:</strong> {{empres}}</p>
          <p><strong>Nome:</strong> {{nom}}</p>
          <p><strong>Setor:</strong> {{seto}}</p>
          <p><strong>Data:</strong> {{formatDate dat}}</p>
          <p><strong>Descrição:</strong> {{descric}}</p>
        </div>
      </div>
    </div>
    {{/each}}
  </div>
</div>

{{/if}}

</main>

<!-- Rodapé -->
<div class="card-footer text-center mt-5 mb-4">
  <footer>
    <p>
      Site criado por <a href="https://github.com/wcalazans81" target="_blank" rel="external">Wellington Calazans</a><br>
      No desafio do <a href="https://www.youtube.com/c/CursoemVídeo" target="_blank" rel="external">Curso em Vídeo</a>
    </p>
  </footer>
</div>

<!-- Scripts -->
<script src="/js/ajustarFooter.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
